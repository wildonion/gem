global
  stats socket /var/run/api.sock user haproxy group haproxy mode 660 level admin expose-fd listeners
  log stdout format raw local0 info

defaults
  mode http
  timeout client 10s
  timeout connect 5s
  timeout server 10s
  timeout http-request 10s
  log global

frontend stats
  bind *:8404
  stats enable
  stats uri /
  stats refresh 10s
  stats hide-version              
  stats refresh 30s               
  stats show-node                 
  stats auth wagies:w@gies%     
  stats uri /stats

  
backend servers
  mode http
  balance roundrobin
  http-response add-header Access-Control-Allow-Origin "*"
  http-response add-header Access-Control-Allow-Credentials true
  http-response add-header Access-Control-Allow-Headers "*"
  http-response add-header Access-Control-Max-Age 3600
  http-after-response set-header Access-Control-Allow-Credentials "true"
  http-response add-header Access-Control-Allow-Methods "*"
  server s1 whitelist-api:7440 check
